<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Custom jQuery Dialog</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        #openDialog {
            margin: 20px;
            padding: 10px 20px;
        }

        .dialog {
            display: none;
            position: absolute;
            width: 300px;
            height: 200px;
            border: 1px solid #999;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .dialog-header {
            background-color: #007bff;
            color: #fff;
            padding: 10px;
            cursor: move;
            user-select: none;
            position: relative;
        }

        .close-btn {
            position: absolute;
            right: 10px;
            top: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .dialog-content {
            padding: 10px;
            height: calc(100% - 40px);
            overflow: auto;
        }

        .resizer {
            width: 10px;
            height: 10px;
            background: #ccc;
            position: absolute;
            right: 0;
            bottom: 0;
            cursor: se-resize;
        }
    </style>
</head>

<body>

    <button id="openDialog">Open Dialog</button>

    <div class="dialog" id="customDialog">
        <div class="dialog-header">
            Info Dialog
            <span class="close-btn" id="closeDialog">x</span>
        </div>
        <div class="dialog-content">
            <p>This is a custom dialog window made only with jQuery and CSS.</p>
            <p>You can move, resize, and close it.</p>
        </div>
        <div class="resizer"></div>
    </div>

    <script>
        $(function () {
            const $dialog = $('#customDialog');
            const $header = $dialog.find('.dialog-header');
            const $resizer = $dialog.find('.resizer');

            // Open dialog
            $('#openDialog').click(function () {
                $dialog.css({ top: '100px', left: '100px' }).fadeIn();
                // const windowWidth = $(window).width();
                // const windowHeight = $(window).height();
                // const dialogWidth = $dialog.outerWidth();
                // const dialogHeight = $dialog.outerHeight();

                // const top = (windowHeight - dialogHeight) / 2;
                // const left = (windowWidth - dialogWidth) / 2;

                // $dialog.css({ top: top + 'px', left: left + 'px' }).fadeIn();
            });

            // Close dialog
            $('#closeDialog').click(function () {
                $dialog.fadeOut();
            });

            // Drag functionality
            let isDragging = false;
            let offset = { x: 0, y: 0 };

            $header.on('mousedown', function (e) {
                isDragging = true;
                offset.x = e.pageX - $dialog.offset().left;
                offset.y = e.pageY - $dialog.offset().top;
            });

            $(document).on('mousemove', function (e) {
                if (isDragging) {
                    // const dialogWidth = $dialog.outerWidth();
                    // const dialogHeight = $dialog.outerHeight();
                    // const windowWidth = $(window).width();
                    // const windowHeight = $(window).height();

                    // let left = e.pageX - offset.x;
                    // let top = e.pageY - offset.y;

                    // // Clamp within window bounds
                    // left = Math.max(0, Math.min(windowWidth - dialogWidth, left));
                    // top = Math.max(0, Math.min(windowHeight - dialogHeight, top));

                    // $dialog.css({
                    //     top: top + 'px',
                    //     left: left + 'px'
                    // });
                    $dialog.css({
                        top: e.pageY - offset.y,
                        left: e.pageX - offset.x
                    });
                }
            }).on('mouseup', function () {
                isDragging = false;
            });

            // Resize functionality
            let isResizing = false;
            let startWidth, startHeight, startX, startY;

            $resizer.on('mousedown', function (e) {
                //e.preventDefault();
                isResizing = true;
                startX = e.clientX;
                startY = e.clientY;
                startWidth = $dialog.width();
                startHeight = $dialog.height();
            });

            $(document).on('mousemove', function (e) {
                if (isResizing) {
                    // let newWidth = startWidth + (e.clientX - startX);
                    // let newHeight = startHeight + (e.clientY - startY);

                    // // Enforce min and max dimensions
                    // newWidth = Math.max(200, Math.min(600, newWidth));
                    // newHeight = Math.max(100, Math.min(400, newHeight));

                    // $dialog.css({
                    //     width: newWidth + 'px',
                    //     height: newHeight + 'px'
                    // });
                    $dialog.css({
                        width: startWidth + (e.clientX - startX),
                        height: startHeight + (e.clientY - startY)
                    });
                }
            }).on('mouseup', function () {
                isResizing = false;
            });
        });
    </script>

</body>

</html>